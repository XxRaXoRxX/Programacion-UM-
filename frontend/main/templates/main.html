
{% extends 'base.html' %}

{% block content %}
		
	<form method="POST" action="{{url_for('main.index')}}">
		<!-- Fila de busqueda -->
		<div class="row mt-1 align-items-center">
			<div class="col-sm-1"></div>
			<div class="col-sm-4">
				<button class="btn-secundary btn-lg dropdown" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
					<font class = "config">Filtrar por título<i class="bi bi-caret-down" style = "font-size: 20px;"></i></font>
				</button>
				<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
					<li>
						<div class="form-group-center">
							<input type="text" name="filter_title" id="texto" placeholder="Ingresar Tìtulo a Filtrar" class="form-control" {% if filter_title %} value="{{filter_title}}" {% endif %}>
							<button type="submit" type="button" class="btn btn-secundary">Filtrar</button>
						</div>
					</li>
				</ul>
			</div>
			<div class="col-sm-4 align-self-center">
				<button class="btn-secundary btn-lg dropdown" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
					<font class = "config">Filtrar por autor<i class="bi bi-caret-down" style = "font-size: 20px;"></i></font>
				</button>
				<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
					<li>
						<li>
							<div class="form-group">
								<input type="text" name="filter_author" id="texto" placeholder="Ingresar Autor a Filtrar" class="form-control" {% if filter_author %} value="{{filter_author}}" {% endif %}>
								<button type="submit" type="button" class="btn btn-secundary">Filtrar</button>
							</div>
						</li>
					</li>
				</ul>
			</div>
			<div class="col-sm-3 align-self-center">
				<button class="btn-secundary btn-lg dropdown" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
					<font class = "config">Filtrar por puntaje<i class="bi bi-caret-down" style = "font-size: 20px;"></i></font>
				</button>
				<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
					<li>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="radio" name="filter_rating" id="inlineRadio1" value="1" {% if filter_rating == "1" %} checked {% endif %}>
							<label class="form-check-label" for="inlineRadio1">1</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="radio" name="filter_rating" id="inlineRadio2" value="2" {% if filter_rating == "2" %} checked {% endif %}>
							<label class="form-check-label" for="inlineRadio2">2</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="radio" name="filter_rating" id="inlineRadio3" value="3" {% if filter_rating == "3" %} checked {% endif %}>
							<label class="form-check-label" for="inlineRadio3">3</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="radio" name="filter_rating" id="inlineRadio4" value="4" {% if filter_rating == "4" %} checked {% endif %}>
							<label class="form-check-label" for="inlineRadio4">4</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="radio" name="filter_rating" id="inlineRadio5" value="5" {% if filter_rating == "5" %} checked {% endif %}>
							<label class="form-check-label" for="inlineRadio5">5</label>
						</div>
						<button type="submit" type="button" class="btn btn-secundary">Filtrar</button>
					</li>
				</ul>
			</div>
		</div>

		<!-- Fila Poema -->
		<tbody>
			{% for poem in poems %}
				<div class="row mt-2">
					<!-- Poema -->
					<div class="col-sm-12">
						<a type="button" href="{{url_for('poem.view',id=poem.id)}}" class="btn-success float-end">
							<div class="row">
								<!-- Titulo Poema -->
								<div class="col-sm-7 align-self-center">
									<p class = "tituloPoema float-start">
										<b>{{poem.title}}</b>
									</p>
								</div>
								<!-- Autor y Calificación -->
								<div class="col-sm-5">
									<div class="row">
										<!-- Autor -->
										<div class="col-sm-8 align-self-center">
											<p class = "tituloPoema text-start">
												Autor:<br>
												{{poem.user.name}}
											</p>
										</div>
										<!-- Calificación -->
										<div class="col-sm-4 align-self-center">
											<div class="container">
												<img class = "estrellaMenu" src="{{url_for('static', filename='img/star.png')}}" alt="Calificación">
												<div class="centered calificacionMenu">{{poem.marksAvrg}}</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</a>
					</div>
				</div>
			{% endfor %}
		</tbody>

		<!-- Paginación -->
		<nav class = "mt-3" aria-label="Page navigation example">
			<ul class="pagination justify-content-center">
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="< Atras" {% if page == 1 %} hidden {% endif %}></li>
			
			{% if page < 3 %}
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="1"/></li>
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="2"/></li>
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="3"/></li>
			{% else %}
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="{{page - 2}}"/></li>
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="{{page - 1}}"/></li>
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="{{page}}"/></li>
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="{{page + 1}}"/></li>
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="{{page + 2}}"/></li>
			{% endif %}
			
			<li class="page-item"><input type="submit" class="page-link" name="_page" value="Siguiente >"/></li>
			</ul>
		</nav>
	</form>

{% endblock %}